<!--
 - Copyright (C) 2011 Google Inc.
 -
 - Licensed under the Apache License, Version 2.0 (the "License");
 - you may not use this file except in compliance with the License.
 - You may obtain a copy of the License at
 -
 -      http://www.apache.org/licenses/LICENSE-2.0
 -
 - Unless required by applicable law or agreed to in writing, software
 - distributed under the License is distributed on an "AS IS" BASIS,
 - WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 - See the License for the specific language governing permissions and
 - limitations under the License.
-->

<div class="testcontainer" id="testDocumentWriteRecursive"
  ><script>document.write(
    "<b><script>document.write(\"Hello,</b> \",\"World\");<\/script>");
  </script>!</div>
<br>

<script type="text/javascript">
  // This test uses dynamic scripts, and so cannot work in ES5/3 mode.
  jsunitRegisterIf(inES5Mode,
                   'testDocumentWriteRecursive',
                   function testDocumentWriteRecursive() {
    var testContainer = document.getElementById("testDocumentWriteRecursive");
  
    assertEquals('Full text', 'Hello, World!', testContainer.innerText);

    var bElements = testContainer.getElementsByTagName("B");
    assertEquals('Number of B elements', 1, bElements.length);

    assertEquals('B element content', 'Hello,', bElements[0].innerText);

    pass('testDocumentWriteRecursive');
  });
</script>

<div class="testcontainer" id="testTrailingLineComment">
<script>
    window.result = 'trailing line comment';// delibrate comment</script>
</div>
<script>
  jsunitRegister('testTrailingLineComment',
                 function testTrailingLineComment() {
    assertEquals('Full text', 'trailing line comment', window.result);
    pass('testTrailingLineComment');
  });

  // jsunit complains if there are zero tests
  jsunitRegister('testNop', function testNop() { pass('testNop'); });
</script>
