<!--
 - Copyright (C) 2012 Google Inc.
 -
 - Licensed under the Apache License, Version 2.0 (the "License");
 - you may not use this file except in compliance with the License.
 - You may obtain a copy of the License at
 -
 -      http://www.apache.org/licenses/LICENSE-2.0
 -
 - Unless required by applicable law or agreed to in writing, software
 - distributed under the License is distributed on an "AS IS" BASIS,
 - WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 - See the License for the specific language governing permissions and
 - limitations under the License.
-->

<html>
  <head>
    <title>Caja host page</title>
    <style type="text/css">
      iframe {
        width: 650px;
        height: 20000px;
        overflow-x: hidden;
        overflow-y: hidden;
      }
    </style>
  </head>
  <body>
    <!-- http://giveupandusetables.com/ -->
    <table>
      <thead><tr id="head"></tr></thead>
      <tbody><tr id="body"></tr></tbody>
    </table>
    <script>
      // URL parameter parsing code from blog at:
      // http://www.netlobo.com/url_query_string_javascript.html
      function getUrlParam(name) {
        name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
        var regexS = "[\\?&]"+name+"=([^&#]*)";
        var regex = new RegExp(regexS);
        var results = regex.exec(window.location.href);
        return (results == null) ? "" : results[1];
      }

      var cajaServer = getUrlParam('cajaServer');

      var urls = [
        [
          'Uncajoled',
          './guest-standalone.html'
        ],
        [
          'ES5/3',
          './container.html?forceES5Mode=false&cajaServer=' + cajaServer
        ],
        [
          'ES5 (SES)',
          './container.html?forceES5Mode=true&cajaServer=' + cajaServer
        ]
      ];

      var head = document.getElementById('head');
      var body = document.getElementById('body');

      function appendTd(a, b) {
        var td = document.createElement('td');
        td.appendChild(b);
        a.appendChild(td);
      }

      for (var i = 0; i < urls.length; i++) {
        var h = document.createElement('h1');
        h.innerText = urls[i][0];
        appendTd(head, h);

        var ifr = document.createElement('iframe');
        ifr.setAttribute('src', urls[i][1]);
        appendTd(body, ifr);
      }
    </script>
  </body>
</html>
